<!DOCTYPE html><html><head><title>test</title>
<meta charset="utf-8"></head><body>

<script src="../node_modules/uupaa.help.js/lib/Help.js"></script>
<script src="../node_modules/uupaa.task.js/lib/Task.js"></script>
<script src="../node_modules/uupaa.test.js/lib/Test.js"></script>
<script src="../lib/PageVisibilityEvent.js"></script>
<script src="./test.js"></script>
<script>
  PageVisibilityEvent.on(function(pageHide) { // @arg Boolean:
    document.title = pageHide ? "\u25a0"  // stop icon
                              : "\u25b6"; // play icon
  });

  window.addEventListener("load",         function(event) { log(event.type); });
  window.addEventListener("unload",       function(event) { log(event.type); });
  window.addEventListener("beforeunload", function(event) { log(event.type); return "leave?"; });
  window.addEventListener("pageshow",     function(event) { log(event.type); });
  window.addEventListener("pageshow",     function(event) { log(event.type); });
  window.addEventListener("pagehide",     function(event) { log(event.type); });
  window.addEventListener("focus",        function(event) { log(event.type); });
  window.addEventListener("blur",         function(event) { log(event.type); });
  document.addEventListener("visibilitychange",       _visibilitychange);
  document.addEventListener("webkitvisibilitychange", _visibilitychange);

  function _visibilitychange(event) {
    log(event.type + ":" + (document.webkitHidden ? "hidden" : "show"));
  }

  function log(msg) {
    console.log(msg);
    document.body.innerHTML += msg + "<br />";
  }
</script>
</body></html>

